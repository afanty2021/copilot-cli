# 基本使用

<cite>
**本文档中引用的文件**
- [README.md](file://README.md)
- [changelog.md](file://changelog.md)
</cite>

## 目录
1. [简介](#简介)
2. [系统要求](#系统要求)
3. [安装指南](#安装指南)
4. [首次启动与认证](#首次启动与认证)
5. [核心交互模式](#核心交互模式)
6. [模型选择与配置](#模型选择与配置)
7. [配额管理](#配额管理)
8. [典型使用场景](#典型使用场景)
9. [启动参数详解](#启动参数详解)
10. [故障排除](#故障排除)

## 简介

GitHub Copilot CLI是GitHub Copilot的人工智能编码助手的终端版本，为开发者提供了在命令行环境中直接进行AI驱动的代码协作能力。该工具通过自然语言对话的方式，帮助开发者构建、调试和理解代码，同时深度集成了GitHub工作流。

### 核心特性

- **终端原生开发**：直接在命令行中与Copilot编码代理协作，无需上下文切换
- **开箱即用的GitHub集成**：使用自然语言访问您的仓库、问题和拉取请求，所有操作都通过现有GitHub账户认证
- **智能代理能力**：能够规划和执行复杂任务，支持构建、编辑、调试和重构代码
- **MCP扩展性**：支持自定义MCP服务器以扩展功能
- **完全控制**：每个操作都需要明确确认，确保安全可控

**章节来源**
- [README.md](file://README.md#L1-L18)

## 系统要求

### 支持的操作系统

- **Linux**
- **macOS**
- **Windows**

### 运行环境要求

- **Node.js** 版本 22或更高
- **npm** 版本 10或更高
- （仅限Windows）**PowerShell** 版本 6或更高

### 订阅要求

需要有效的GitHub Copilot订阅才能使用此CLI工具。如果您的组织或企业管理员已禁用该功能，则无法使用。

**章节来源**
- [README.md](file://README.md#L22-L39)

## 安装指南

### 全局安装

使用npm全局安装GitHub Copilot CLI：

```bash
npm install -g @github/copilot
```

### 验证安装

安装完成后，可以通过以下命令验证安装是否成功：

```bash
copilot --version
```

这将显示当前安装的CLI版本号。

**章节来源**
- [README.md](file://README.md#L41-L43)

## 首次启动与认证

### 启动CLI

在包含代码的目录中启动GitHub Copilot CLI：

```bash
copilot
```

### 首次启动体验

首次启动时，您将看到一个可爱的动画横幅。如果您希望再次看到这个横幅，可以使用`--banner`标志启动CLI。

```bash
copilot --banner
```

### 认证方式

#### 方法一：OAuth认证（推荐）

如果尚未登录GitHub，系统会提示您使用`/login`斜杠命令进行认证。输入该命令并按照屏幕上的指示完成认证过程。

#### 方法二：个人访问令牌（PAT）认证

您也可以使用具有"Copilot Requests"权限的细粒度PAT进行认证：

1. 访问 https://github.com/settings/personal-access-tokens/new
2. 在"权限"部分，点击"添加权限"并选择"Copilot Requests"
3. 生成您的令牌
4. 将令牌添加到环境变量`GH_TOKEN`或`GITHUB_TOKEN`中（优先级顺序）

### 认证状态检查

认证成功后，您可以随时检查当前的认证状态，并管理多个GitHub账户。

**章节来源**
- [README.md](file://README.md#L45-L73)

## 核心交互模式

### 自然语言指令

GitHub Copilot CLI支持通过自然语言与AI代理进行交互。您可以：

- 描述您想要实现的功能
- 提出具体的编程问题
- 请求代码解释和优化建议
- 获取调试帮助

### 斜杠命令系统

CLI提供了丰富的斜杠命令来增强交互体验：

#### 基础命令

- `/login` - 登录或切换账户
- `/model` - 切换使用的AI模型
- `/exit` 或 `/quit` - 退出CLI
- `/clear` - 清除当前会话上下文
- `/feedback` - 提交反馈

#### 高级命令

- `/delegate` - 异步委托任务给Copilot编码代理
- `/agent` - 使用自定义代理
- `/usage` - 查看配额使用情况
- `/terminal-setup` - 设置多行输入支持

### 文件交互

您可以使用`@`符号提及文件作为输入：

```bash
@path/to/file.js
```

这将把指定文件的内容作为上下文提供给AI模型。

**章节来源**
- [changelog.md](file://changelog.md#L1-L20)
- [changelog.md](file://changelog.md#L259-L269)

## 模型选择与配置

### 默认模型

GitHub Copilot CLI默认使用Claude Sonnet 4.5模型。该模型在代码理解和生成方面表现出色。

### 模型切换

使用`/model`斜杠命令轻松切换模型：

```bash
/model
```

这将打开模型选择器，让您从可用的模型列表中进行选择。

### 可用模型

根据您的Copilot订阅类型，您可能可以访问以下模型：
- Claude Sonnet 4.5（默认）
- Claude Sonnet 4
- GPT-5（视订阅情况而定）

### 模型配置

每个模型都有特定的配额消耗倍数（目前所有支持的模型都是1x）。您可以使用以下命令查看当前使用的模型：

```bash
/model <model_name>
```

例如：
```bash
/model claude-sonnet-4.5
```

**章节来源**
- [README.md](file://README.md#L65-L67)
- [changelog.md](file://changelog.md#L259-L269)

## 配额管理

### Premium请求配额

每次向GitHub Copilot CLI提交提示时，都会消耗您每月的Premium请求配额。具体规则如下：

- **每次请求**：消耗1个Premium请求配额
- **配额限制**：基于您的Copilot订阅类型确定
- **配额查看**：使用`/usage`命令查看当前使用情况

### 配额监控

CLI提供了多种方式来监控您的配额使用：

```bash
/usage
```

该命令将显示：
- 当前会话的使用统计
- 总体配额使用情况
- 各模型的Token使用量

### 配额提醒

当对话上下文接近模型限制的20%剩余时，系统会发出警告，建议开始新的会话以避免上下文截断。

**章节来源**
- [README.md](file://README.md#L68-L73)
- [changelog.md](file://changelog.md#L223-L231)

## 典型使用场景

### 场景一：代码生成

**需求**：创建一个新的Express.js路由处理函数

**交互过程**：
1. 描述需求："创建一个用于处理用户注册的Express.js路由"
2. 提供上下文：`@routes/users.js`
3. 获取结果：AI生成完整的路由代码和必要的中间件

### 场景二：错误调试

**需求**：解决TypeError: Cannot read properties of undefined

**交互过程**：
1. 提供错误信息："运行测试时出现TypeError: Cannot read properties of undefined"
2. 添加相关文件：`@src/userService.js @test/userService.test.js`
3. 获取解决方案：AI分析代码并提供修复建议

### 场景三：代码理解

**需求**：理解复杂的业务逻辑

**交互过程**：
1. 选择关键文件：`@src/businessLogic.js`
2. 提问："这段代码的主要业务逻辑是什么？"
3. 获取解释：AI提供详细的代码解释和业务流程说明

### 场景四：性能优化

**需求**：优化数据库查询性能

**交互过程**：
1. 提供基准代码：`@src/repository.js`
2. 指出问题："查询速度太慢，需要优化"
3. 获取建议：AI提供索引优化、查询重写等建议

## 启动参数详解

### --banner

显示启动横幅，即使不是首次启动也能看到欢迎界面。

```bash
copilot --banner
```

### --resume

恢复最近关闭的会话。这是`--continue`标志的别名。

```bash
copilot --resume
```

### --continue

继续最近结束的会话。

```bash
copilot --continue
```

### --screen-reader

启用屏幕阅读器模式，优化无障碍体验。

```bash
copilot --screen-reader
```

### --enable-all-github-mcp-tools

启用所有可用的GitHub MCP工具，而不是默认限制的工具集。

```bash
copilot --enable-all-github-mcp-tools
```

### --disable-parallel-tools-execution

禁用工具的并行执行功能。

```bash
copilot --disable-parallel-tools-execution
```

### --stream

控制输出流设置。默认启用，可设置为`off`禁用。

```bash
copilot --stream off
```

### --additional-mcp-config

临时添加或覆盖MCP服务器配置。

```bash
copilot --additional-mcp-config '{"mcpServers": {"my-tool": {...}}}'
copilot --additional-mcp-config @/path/to/config.json
```

### --allow-all-paths

允许访问所有路径，跳过权限确认。

```bash
copilot --allow-all-paths
```

### --allow-tool 和 --deny-tool

控制允许或禁止的工具调用。

```bash
copilot --allow-tool "shell(*)" --deny-tool "shell(npm run *:*:*)"
```

**章节来源**
- [changelog.md](file://changelog.md#L98-L117)
- [changelog.md](file://changelog.md#L120-L132)

## 故障排除

### 常见问题及解决方案

#### 认证问题

**问题**：登录后仍然提示未认证
**解决方案**：检查环境变量设置，确保`GH_TOKEN`或`GITHUB_TOKEN`正确配置

**问题**：SSH环境下的OAuth登录失败
**解决方案**：尝试使用PAT认证，或检查防火墙设置

#### 模型选择问题

**问题**：无法使用某些模型
**解决方案**：检查您的Copilot订阅类型，确认是否有相应模型的访问权限

#### 性能问题

**问题**：响应速度慢
**解决方案**：
- 减少输入的代码量
- 使用更精确的文件提及
- 考虑使用`--stream off`禁用流式输出

#### 配额问题

**问题**：配额耗尽
**解决方案**：等待下个月配额重置，或升级您的Copilot订阅

### 调试技巧

#### 日志级别设置

在`~/.copilot/config`中设置日志级别以获取更多调试信息：

```json
{
  "log_level": "debug"
}
```

可用的日志级别：
- `"none"` - 无日志
- `"error"` - 错误日志
- `"warning"` - 警告日志
- `"info"` - 信息日志
- `"debug"` - 调试日志
- `"all"` - 所有日志
- `"default"` - 默认级别

#### 会话恢复

如果遇到意外中断，可以使用`--resume`参数恢复之前的会话。

#### 多行输入

对于不支持Kitty协议的终端，可以使用`/terminal-setup`命令设置多行输入支持。

**章节来源**
- [changelog.md](file://changelog.md#L182-L199)
- [changelog.md](file://changelog.md#L201-L213)

## 结论

GitHub Copilot CLI为开发者提供了一个强大的终端级AI编码助手。通过自然语言交互、智能代理能力和丰富的命令系统，它能够显著提升开发效率。合理使用各种功能和参数，配合适当的配额管理，可以让您充分发挥这个工具的潜力。

随着项目的持续发展，建议定期更新到最新版本以获得最佳体验和最新功能。同时，积极提供反馈可以帮助改进这个宝贵的开发工具。